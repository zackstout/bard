{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/components/Scene.vue?74b9","webpack:///./src/assets/home_icon.png","webpack:///./src/components/Character.vue?285f","webpack:///./src/components/Play.vue?de2f","webpack:///./src/App.vue?ca14","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?bfbe","webpack:///./src/App.vue","webpack:///./src/components/Play.vue?2cdd","webpack:///./src/EventBus.ts","webpack:///./src/assets/d3/index.js","webpack:///./src/utils.js","webpack:///./src/components/Play.vue?7878","webpack:///./src/components/Play.vue?db2d","webpack:///./src/components/Play.vue","webpack:///./src/components/Home.vue?61e2","webpack:///./src/components/Home.vue?3513","webpack:///./src/components/Home.vue?0dad","webpack:///./src/components/Home.vue","webpack:///./src/components/Character.vue?fae0","webpack:///./src/components/Character.vue?e91a","webpack:///./src/components/Character.vue?244e","webpack:///./src/components/Character.vue","webpack:///./src/components/Scene.vue?6c20","webpack:///./src/components/Scene.vue?7dd3","webpack:///./src/components/Scene.vue?6afb","webpack:///./src/components/Scene.vue","webpack:///./src/main.ts","webpack:///./src/components/Home.vue?0fe6"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","App","component","staticStyle","_l","staticClass","style","play","on","$event","goPlay","_v","_s","label","$router","playLabel","_m","directives","rawName","expression","$$selectedVal","Array","filter","target","options","selected","map","val","_value","minLengthSelectOption","multiple","opt","domProps","speeches","speech","title","speaker","lines","line","getLineStyle","EVENTS","CLICK_SCENE","CLICK_SPEAKER","EventBus","select","selectAll","scaleLinear","scaleBand","scaleTime","scaleOrdinal","axisTop","axis","axisBottom","axisLeft","area","group","extent","curveCardinal","hierarchy","treemap","arc","euripidesPlays","plays","sort","a","b","console","log","CHAR_COLORS","getSceneBreakdown","scene","numLines","speakerAmts","type","speakers","forEach","keys","getPlayBreakdown","scenes","getLinesBySpeakerByChunk","chunkSize","targetSpeaker","res","getSpeakers","speakersUse","isGreek","includes","chunkIdx","lineNo","sceneIdx","numWords","split","inc","slug","replace","getSpeeches","idx","getCharacterInteractions","interactions","prevSpeaker","getInteractionTotals","otherSpeaker","pairRep","join","pair","getCharColor","getSceneStats","playData","sceneTitle","total","inScene","prev","seenTarget","len","runScenePie","width","height","startAngle","Math","PI","endAngle","d3","remove","svg","append","attr","generator","innerRadius","outerRadius","runPiecharts","margin","left","top","bottom","right","scenesPerAct","actNum","sceneNum","x","parseInt","maxScenesPerAct","max","bd","treeData","children","amt","charName","charIdx","findIndex","fill","root","sum","WIDTH_SCL","HEIGHT_SCL","PADDING","size","padding","leaves","enter","x0","y0","x1","y1","ev","$emit","dataset","y","range","domain","runCharacters","w","h","bandwidth","runInteractions","names","idxs","fills","runRidgelines","overlap","xScale","xValue","xAxis","yScale","yValue","speakerScale","speakerValue","speakerAxis","curve","lineY1","dataFlat","spkrs3","areaChartHeight","innerHTML","gSpeaker","ty","datum","minLengthSelectOptions","allSpeakers","mounted","loadData","$on","goScene","goCharacter","routeChanged","baseUrl","then","innerWidth","charInteractions","totals","chartWidth","chartHeight","catch","e","error","getSpeechesOfMinLength","find","reduce","acc","getCharStyle","col","color","textShadow","Play","composing","searchText","search","searchResults","text","allPlayText","getAll","Promise","all","allPlays","tgt","results","character","$route","params","Character","prevScene","_e","allScenes","nextScene","char","sceneData","fontWeight","marginTop","Scene","use","router","routes","path","Home","props","route","config","productionTip","$mount"],"mappings":"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","file":"js/app.bef4a304.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Scene.vue?vue&type=style&index=0&id=6188992f&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/home_icon.63818db7.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Character.vue?vue&type=style&index=0&id=1f72e47c&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Play.vue?vue&type=style&index=0&id=bdb2ee3c&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\n/*\n\n\nIs it obvious how ridgelines plot works?  I'm not sure it is\nAdd little desc under each graph\n\nUhhh use tailwind dude\n\nuse typing too\n\nBlank verse vs metric verse\n\nExtend to  other plays... Greek tragedies??\n\n[ ] experiment with using some kind of algo to generate char_colors\n\n[ ] update favicon\n\n[ ] fix issue with ridges in char and scene (top char) views....ugh!!\n\nmaaaybe  indicate the scenes  that  a  char is in\n\nNOTES: If play or character or whatever is not in list, need to show \"404\" page\n\n[ ] scene arrows should cycle back/forward. the plays end where they begin.\n\n[ ] Find 20 visibly distinct colors\n\n[ ] make \"speeches\" component (Play and Character....and Scene)\n\n[ ] relationships! (Must be added manually....)\n\n[ ] turn off text shadow...in general, style combos dropdown\n\n[ ] use tailwind!\n\n\n\n[ ] line numbers?\n\n[ ] Checkboxes to show/hide graphs \n(bc want to have highlight behavior on one affect others)\n\n[ ] Clean up chart margin weirdness (number of things...Height of first one overflowing top....stuff going off to right...)\n\n\n\n[ ] Hmm...brutus_lucius interaction rate looks way too high...\n[ ] \"ROSENCRANTZ:\"\n\n[ ] Clean up data stuff\nLike...Do we ever want to save data? In the json? Or just chill for now\n\n[ ] Sorting\n\n[ ] Expose other options (curve type e.g.)\n\n\n\n\n[x] TODO: Add character colors! (maybe text shadow to lines??)\n[x] TODO: Filter by speech length....within a play? Across all plays?\n[x] TODO: Fill interactions chart with real colors\n[x] TODO: Get curves back\n[x] TODO: Add \"piecharts\"\n[x] added click scene \"pie chart\"\n[x] Another vis idea: number of lines per speech in a play....just a bar graph I guess\nKind of a histogram I guess\nEh, it's not actually that cool\n[x] why isn't basic alphabetical sorting of plays working?\n[x] TODO: How to get hover on interactions chart to communicate to Ridges chart??\n=> Need EVENTBUS!\nfigure outhow to share data (char colors)...\nFeels like need to pass in to runRidgelines, at the least. Butneed to do more...\nScene needs to recompute or know about playBreakdown, to get speakerAmts...\nMaybe browser cache is smart enough to handle it?\n\n[x] Represent in scene: numlines, percent of play\nOoooh maybe like a clock that shows a sliver, and where in play it is. I like that.\n\n[x] add sidebar to Scene (and char) view\n\n[x] TODO: Add character view\n[x] Clean up all hover/click\n[x] Add all click/routing behavior\n\n[x] Navigation duplicated issue\n(looks like emmpty catch after router.push should silence the error)\n\n[x] filter by speaker/all in play/Speeches\n\n[x] Bold the scene/char we are on in sidebar\n[x] Add \"created by\" to home and all sidebars\n[ ] (pull out sidebar??)\n[x] Add \"home\" button (or list of all plays somehow to Scene/Char)\n[x] hover indication  to  char list in Scene\n\n[x] google analytics\n[x] TODO: Search!! ACROSS ALL PLAYS, from home\n[x] basics of euripides plays working\n*/\n\n@Component({})\nexport default class App extends Vue {}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--12-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/ts-loader/index.js??ref--12-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=a958f0f0&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{attrs:{\"id\":\"sidebar\"}},[_c('div',{staticStyle:{\"padding\":\"1rem\"}},_vm._l((_vm.plays),function(p){return _c('div',{key:p.value,staticClass:\"side-play\",style:({ 'font-weight': _vm.play === p.value ? 'bold' : '' }),on:{\"click\":function($event){return _vm.goPlay(p.value)}}},[_vm._v(\" \"+_vm._s(p.label)+\" \")])}),0)]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{staticClass:\"click\",staticStyle:{\"width\":\"15px\",\"height\":\"15px\"},on:{\"click\":function($event){return _vm.$router.push('/')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/home_icon.png\"),\"alt\":\"\"}})]),_c('hr',{staticStyle:{\"margin-bottom\":\"0\"}}),_c('h2',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.playLabel))]),_c('div',{staticClass:\"ridges-container\"}),_c('div',{staticClass:\"chart-desc\"},[_vm._v(\" Shows the number of lines spoken by each character. Time advances along the x-axis. \")]),_c('div',{staticClass:\"line\"}),_vm._m(0),_c('div',{staticClass:\"line\"}),_vm._m(1),_c('div',{staticClass:\"line\"}),_c('div',[_c('div',{staticClass:\"chart-container\"},[_c('h3',[_vm._v(\"Speeches\")]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('span',{staticStyle:{\"margin-right\":\"3px\"}},[_vm._v(\"Minimum length:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.minLengthSelectOption),expression:\"minLengthSelectOption\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.minLengthSelectOption=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.minLengthSelectOptions),function(opt){return _c('option',{key:opt,domProps:{\"value\":opt}},[_vm._v(_vm._s(opt))])}),0)]),_c('div',{staticStyle:{\"font-style\":\"italic\",\"margin-top\":\"10px\"}},[_vm._v(\"Results: \"+_vm._s(_vm.speeches.length))])]),_c('div',_vm._l((_vm.speeches),function(speech,i){return _c('div',{key:i,staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{staticStyle:{\"font-weight\":\"bold\"}},[_vm._v(_vm._s(speech.title))]),_c('div',[_vm._v(\" \"+_vm._s(speech.data.speaker)+\" \"),_c('span',{staticStyle:{\"font-style\":\"italic\"}},[_vm._v(\"(\"+_vm._s(speech.data.lines.length)+\" lines)\")])]),_c('div',_vm._l((speech.data.lines),function(line,i){return _c('div',{key:i,style:(_vm.getLineStyle(speech.data.speaker))},[_vm._v(\" \"+_vm._s(line)+\" \")])}),0)])}),0)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"charts-container\"},[_c('div',{staticClass:\"chart-container\"},[_c('h3',[_vm._v(\"Characters\")]),_c('div',{staticClass:\"characters-container\"}),_c('div',{staticClass:\"chart-desc\"},[_vm._v(\" Shows the number of lines spoken by each character. \")])]),_c('div',[_c('div',{staticClass:\"chart-container\"},[_c('h3',[_vm._v(\"Interactions\")]),_c('div',{staticClass:\"interactions-container\"}),_c('div',{staticClass:\"chart-desc\"},[_vm._v(\" Shows the number of interactions between characters (counted by lines spoken in succession). \")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart-container\"},[_c('h3',[_vm._v(\"Scenes\")]),_c('div',{staticClass:\"pie-container\"}),_c('div',{staticClass:\"chart-desc\"},[_vm._v(\" Shows each scene broken down by number of lines per character. \")])])}]\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nexport const EVENTS = {\n    CLICK_SCENE: \"CLICK_SCENE\",\n    CLICK_SPEAKER: \"CLICK_SPEAKER\"\n};\nexport const EventBus = new Vue();","import { select, selectAll } from 'd3-selection';\n\nimport {\n    scaleLinear,\n    scaleTime,\n    scaleOrdinal,\n    scaleBand\n} from 'd3-scale';\n\nimport { hierarchy, treemap } from 'd3-hierarchy';\n\nimport { area, curveCardinal, arc } from 'd3-shape';\n\n// import { nest } from 'd3-collection';\n\nimport { group, extent } from 'd3-array';\n\nimport { axisTop, axisBottom, axisLeft } from 'd3-axis';\n\nexport default {\n    select,\n    selectAll,\n    scaleLinear,\n    scaleBand,\n    scaleTime,\n    scaleOrdinal,\n    axisTop,\n    axisBottom,\n    axisLeft,\n    area,\n    group,\n    extent,\n    curveCardinal,\n    hierarchy,\n    treemap,\n    arc\n};","\nimport d3 from \"@/assets/d3\";\nimport { EVENTS, EventBus } from \"@/EventBus\";\n\n\nexport const euripidesPlays = [\n  \"alcestis\",\n  \"andromache\",\n  \"bacchan\",\n  \"cyclops\",\n  \"electra_eur\",\n  \"hecuba\",\n  \"helen\",\n  \"heracleidae\",\n  \"heracles\",\n  \"hippolytus\",\n  \"ion\",\n  \"iphi_aul\",\n  \"iph_taur\",\n  \"medea\",\n  \"orestes\",\n  \"phoenissae\",\n  \"rhesus\",\n  \"suppliants\",\n  \"troj_women\"\n];\n\nexport const sophoclesPlays = [\n  \"ajax\",\n  \"antigone\",\n  \"electra\",\n  \"colonus\",\n  \"oedipus\",\n  \"philoct\",\n  \"trachinae\"\n];\n\n\nexport const plays = [\n  { value: \"macbeth\", label: \"Macbeth\" },\n  { value: \"merchant\", label: \"Merchant of Venice\" },\n  { value: \"asyoulikeit\", label: \"As You Like It\" },\n  { value: \"1henryiv\", label: \"Henvry IV, Part 1\" },\n  { value: \"cleopatra\", label: \"Cleopatra\" },\n  { value: \"coriolanus\", label: \"Coriolanus\" },\n  { value: \"hamlet\", label: \"Hamlet\" },\n  { value: \"julius_caesar\", label: \"Julius Caesar\" },\n  { value: \"lear\", label: \"King Lear\" },\n  { value: \"measure\", label: \"Measure for Measure\" },\n  { value: \"midsummer\", label: \"Midummer Night's Dream\" },\n  { value: \"much_ado\", label: \"Much Ado About Nothing\" },\n  { value: \"othello\", label: \"Othello\" },\n  { value: \"richardii\", label: \"Richard II\" },\n  { value: \"richardiii\", label: \"Richard III\" },\n  { value: \"romeo_juliet\", label: \"Romeo & Juliet\" },\n  { value: \"tempest\", label: \"The Tempest\" },\n  { value: \"titus\", label: \"Titus Andronicus\" },\n  { value: \"troilus_cressida\", label: \"Troilus & Cressida\" },\n  { value: \"twelfth_night\", label: \"Twelfth Night\" },\n  // ====================================\n  // { value: \"alcestis\", label: \"Alcestis\" },\n  // { value: \"bacchan\", label: \"Bacchae\" },\n  // { value: \"andromache\", label: \"Andromache\" },\n  // { value: \"cyclops\", label: \"Cyclops\" },\n  // { value: \"electra_eur\", label: \"Electra\" },\n  // { value: \"hecuba\", label: \"Hecuba\" },\n  // { value: \"helen\", label: \"Helen\" }\n\n]\n  .sort((a, b) => a.label > b.label ? 1 : -1);\n\nconsole.log(\"plays\", plays);\n\n\nexport const emojiRelationships = {\n  \"murders\": \"\",\n  \"loves\": \"\",\n  \"scorns\": \"\",\n  \"hates\": \"\",\n  \"serves\": \"\",\n  \"commands\": \"\", // redundant?\n  \"parents\": \"\",\n  \"childs\": \"\" // redundant?\n};\n\n\nexport const CHAR_COLORS = [\n  \"#6495ED\",\n  \"#40E0D0\",\n  \"#DE3163\",\n  \"#CCCCFF\",\n  \"#9FE2BF\",\n  \"#FFBF00\",\n  \"navy\",\n  \"maroon\",\n  \"teal\",\n  \"black\",\n  \"coral\",\n  \"violet\",\n  \"purple\",\n];\n\n\nexport const getSceneBreakdown = (scene) => {\n  if (!scene.lines) return { numLines: 0, speakerAmts: [] };\n  const numLines = scene.lines.filter((l) => l.type === \"text\").length;\n  const speakers = {};\n  // speakers items look like:\n  // macbeth: 30\n  scene.lines\n    .filter((l) => l.type === \"text\")\n    .forEach((line) => {\n      if (!speakers.hasOwnProperty(line.speaker)) {\n        speakers[line.speaker] = 0;\n      }\n      speakers[line.speaker]++;\n    });\n\n  // return speakers;\n\n  const speakerAmts = Object.keys(speakers)\n    .map((speaker) => {\n      return { speaker, value: speakers[speaker] / numLines };\n    })\n    .sort((a, b) => b.value - a.value);\n\n  return {\n    numLines,\n    speakerAmts,\n  };\n};\n\n\n// TODO: refacator to use getScenebrekadown\nexport const getPlayBreakdown = (scenes) => {\n  let numLines = 0;\n  const speakers = {};\n  // speakers items look like:\n  // macbeth: 30\n\n  scenes.forEach((scene) => {\n    scene.lines\n      .filter((l) => l.type === \"text\")\n      .forEach((line) => {\n        // console.log('line....', line.speaker);\n        if (!speakers.hasOwnProperty(line.speaker)) {\n          speakers[line.speaker] = 0;\n        }\n        numLines++;\n        speakers[line.speaker]++;\n      });\n  });\n\n  const speakerAmts = Object.keys(speakers)\n    .map((speaker) => {\n      return { speaker, value: speakers[speaker] / numLines };\n    })\n    .sort((a, b) => b.value - a.value);\n\n  return {\n    numLines,\n    speakerAmts,\n  };\n};\n\n\n\n\nexport const getLinesBySpeakerByChunk = (scenes, chunkSize = 10, targetSpeaker = \"\") => {\n  const res = [];\n  const speakers = getSpeakers(scenes);\n\n  const speakersUse = targetSpeaker ? speakers.filter(s => s === targetSpeaker) : speakers;\n\n  const isGreek = euripidesPlays.includes(scenes[0].title);\n  // console.log(\"greek\", isGreek);\n\n  speakersUse.forEach((speaker) => {\n    let chunkIdx = 0;\n    let lineNo = 0;\n    let numLines = 0;\n\n    scenes.forEach((scene, sceneIdx) => {\n      scene.lines.forEach((line) => {\n        if (line.type === \"text\") lineNo++;\n\n        if (line.type === \"text\" && line.speaker === speaker) {\n          // console.log(\"words\", line.value.split(\" \").length)\n          const numWords = line.value.split(\" \").length;\n          const inc = isGreek ? numWords : 1;\n          numLines += inc;\n        }\n\n        if (lineNo % chunkSize === 0 && lineNo > 0) {\n          // save chunk, start new one\n          res.push({\n            speaker,\n            chunkIdx,\n            value: numLines,\n          });\n          lineNo = 0;\n          numLines = 0;\n          chunkIdx++;\n        }\n      });\n    });\n  });\n\n  return res;\n};\n\n\n\n\nfunction getSpeakers(scenes) {\n  const res = [];\n  scenes.forEach((scene) => {\n    scene.lines.forEach((line) => {\n      if (line.type === \"speech\" && !res.includes(line.value)) {\n        res.push(line.value);\n      }\n    });\n  });\n\n  return res;\n}\n\n\n\nfunction slug(name) {\n  return name.replace(/\\s/g, \"_\");\n}\n\n\n\n\nexport const getSpeeches = (scene) => {\n  const speeches = [];\n\n  let speech = {\n    speaker: \"\",\n    lines: [],\n  };\n  // console.log(scene);\n\n  scene.lines.forEach((line, idx) => {\n    if (idx === scene.lines.length - 1) {\n      // last line: push speech\n      speech.lines.push(line.value);\n      speeches.push(speech);\n      return;\n    }\n    if (line.type === \"speech\") {\n      // skip first speaker line:\n      if (speech.lines.length > 0) {\n        speeches.push(speech);\n        speech = {};\n        speech.lines = [];\n      }\n      speech.speaker = line.value;\n    } else {\n      speech.lines.push(line.value);\n    }\n  });\n\n  return speeches;\n};\n\n\n\n\n//   /*\n//   Idea here is to naively assume that when person B speaks directly after person A, they are interacting.s\n\n//   Hmm...we could alternatively try to weight interactions by num of lines\n//   */\nexport const getCharacterInteractions = (scenes) => {\n  const interactions = {};\n\n  scenes.forEach((scene) => {\n    const speeches = getSpeeches(scene);\n    let prevSpeaker = speeches[0].speaker;\n    speeches.slice(1).forEach((speech) => {\n      if (!interactions.hasOwnProperty(prevSpeaker)) {\n        interactions[prevSpeaker] = {};\n      }\n      if (!interactions[prevSpeaker].hasOwnProperty(speech.speaker)) {\n        interactions[prevSpeaker][speech.speaker] = 0;\n      }\n      interactions[prevSpeaker][speech.speaker]++;\n      prevSpeaker = speech.speaker;\n    });\n  });\n\n  return interactions;\n};\n\n\n\n\nexport const getInteractionTotals = (interactions) => {\n  const res = {};\n\n  Object.keys(interactions).forEach((speaker) => {\n    Object.keys(interactions[speaker]).forEach((otherSpeaker) => {\n      const pairRep = [speaker, otherSpeaker].sort().join(\"_\");\n      if (!res.hasOwnProperty(pairRep)) {\n        res[pairRep] = 0;\n      }\n      res[pairRep] += interactions[speaker][otherSpeaker];\n    });\n  });\n\n  // res is an object like {\"Banquo_Macbeth\": 42, ...}\n  return Object.keys(res)\n    .map((pair) => {\n      return { pair, value: res[pair] };\n    })\n    .sort((a, b) => b.value - a.value);\n  // return res;\n};\n\n\n\nexport const getCharColor = (idx) => {\n  // console.log(\"get fill\", idx);\n  if (idx < CHAR_COLORS.length) return CHAR_COLORS[idx];\n  return \"gray\";\n};\n\n\nexport const getTotalMarks = (scenes, target) => {\n  let total = 0;\n  let allChars = 0;\n\n  scenes.forEach(scene => {\n    scene.lines.forEach(line => {\n      line.value.split(\"\").forEach(char => {\n        if (char === target) total++;\n        allChars++;\n      });\n    });\n  });\n\n  return { total, allChars };\n};\n\n\n\nexport const groupLinesByNumber = (scenes) => {\n  // should be of form {1:10,2:20,3:12,4:0,....}\n  let res = {};\n  let maxLen = 0;\n\n  scenes.forEach(scene => {\n    const speeches = getSpeeches(scene);\n    speeches.forEach(speech => {\n      const len = speech.lines.length;\n      if (len > maxLen) maxLen = len;\n      if (!res.hasOwnProperty(len)) {\n        res[len] = 0;\n      }\n      res[len]++\n    })\n  });\n\n  const arr = [];\n  for (let i = 0; i < maxLen; i++)arr.push(i);\n\n  return arr.map(i => {\n    return {\n      lineLength: i,\n      value: res[i] ? res[i] : 0\n    }\n  });\n};\n\n\n// returns {total, prev, scene}, all numbers of lines\nconst getSceneStats = (playData, sceneTitle) => {\n  // console.log('get stats', sceneTitle)\n  let total = 0;\n  let inScene = 0;\n  let prev = 0;\n\n  let seenTarget = false;\n\n  playData.forEach(scene => {\n    const len = scene.lines.length;\n\n    // console.log('seen', scene.title)\n    if (scene.title === sceneTitle) {\n      inScene = len;\n      seenTarget = true;\n    }\n    if (!seenTarget) {\n      prev += len;\n    }\n    total += len;\n  })\n\n  return { total, scene: inScene, prev };\n};\n\n\n\n\n// =================================================================================\n// CHARTS\n// =================================================================================\n\nexport const runScenePie = (playData, sceneTitle, width = 200, height = 200) => {\n  // Switching ideas here...this time, we'll shape the data here instead of passing it it\n\n  const { total, prev, scene } = getSceneStats(playData, sceneTitle);\n\n  // console.log(total, prev, scene);\n\n  // Need to know start and end angles....\n  // sum of all lines that have come already,\n  // and then num of lines in scene,\n  // and total in play\n\n  const startAngle = (360 * prev / total) * Math.PI / 180;\n  const endAngle = startAngle + (360 * scene / total) * Math.PI / 180;\n\n  // console.log(startAngle, endAngle);\n\n  d3.selectAll(\".scenepie\").remove();\n\n  var svg = d3\n    .select(\".scenepie-container\")\n    .append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n    .attr(\"class\", \"scenepie\")\n    .append(\"g\");\n\n  var generator = d3.arc()\n    .innerRadius(0)\n    .outerRadius(width / 2)\n    .startAngle(startAngle)\n    .endAngle(endAngle);\n\n  svg.append('circle')\n    .attr('r', width / 2)\n    .attr('cx', width / 2)\n    .attr('cy', width / 2)\n    .attr('fill', 'gray')\n  // .attr('stroke', 'black')\n\n  svg.append('path')\n    .attr(\"d\", generator)\n    .attr(\"fill\", \"cyan\")\n    // .attr(\"stroke\", \"black\")\n    .attr(\"transform\", `translate(${width / 2},${width / 2})`)\n  // .attrs({\n  //   d: generator,\n  //   transform: 'translate(65, 65)',\n  //   fill: 'cyan',\n  //   stroke: 'black'\n  // });\n};\n\nexport const runPiecharts = (playData, speakerAmts = [], width = 500, height = 350) => {\n  const margin = { left: 80, top: 0, bottom: 0, right: 0 };\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  d3.selectAll(\".pie\").remove();\n\n  var svg = d3\n    .select(\".pie-container\")\n    .append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .attr(\"class\", \"pie\")\n    .append(\"g\");\n\n  // console.log('running piecharts', svg)\n\n  const scenesPerAct = {};\n  playData.forEach(scene => {\n    const [actNum, sceneNum] = scene.title.split(\".\").map((x) => parseInt(x) - 1);\n    if (!scenesPerAct.hasOwnProperty(actNum)) {\n      scenesPerAct[actNum] = 0;\n    }\n    scenesPerAct[actNum]++;\n  });\n\n  const maxScenesPerAct = Math.max(...Object.keys(scenesPerAct).map(key => scenesPerAct[key]));\n  // console.log(\"max..\", maxScenesPerAct);\n\n  playData.forEach((scene) => {\n    const bd = getSceneBreakdown(scene);\n\n    const treeData = {\n      children: bd.speakerAmts.map((amt, i) => {\n        // TODO: index must be index in playBreeakdown.speakerAmts\n        // const i\n        const charName = amt.speaker;\n        const charIdx = speakerAmts.findIndex((x) => x.speaker === charName);\n        // return getCharColor(charIdx);\n        return { ...amt, ...{ fill: getCharColor(charIdx), title: scene.title } };\n      }),\n    };\n\n    // console.log(scene);\n\n    const [actNum, sceneNum] = scene.title.split(\".\").map((x) => parseInt(x) - 1);\n\n    var root = d3.hierarchy(treeData).sum(function (d) {\n      return d.value;\n    });\n\n    // const WIDTH_SCL = 0.17;\n\n    // TODO: Not correct.....\n    const WIDTH_SCL = 1 / (maxScenesPerAct + 1);\n    const HEIGHT_SCL = 0.17;\n    const PADDING = 10;\n\n    d3\n      .treemap()\n      // .size([(width * scene.lines.length) / avgNumLines, (height * scene.lines.length) / avgNumLines])\n      .size([(width - margin.left - PADDING * maxScenesPerAct) * WIDTH_SCL, height * HEIGHT_SCL])\n      .padding(2)(root);\n\n    svg\n      .selectAll(\"any_text_here_doesnt_matter\")\n      .data(root.leaves())\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", function (d) {\n        return d.x0;\n      })\n      .attr(\"y\", function (d) {\n        return d.y0;\n      })\n      .attr(\"width\", function (d) {\n        return d.x1 - d.x0;\n      })\n      .attr(\"height\", function (d) {\n        return d.y1 - d.y0;\n      })\n      .attr(\"cursor\", \"pointer\")\n      .style(\"stroke\", \"black\")\n      .attr(\"data-title\", function (d) {\n        // console.log(\"d\", d);\n        return d.data.title;\n      })\n      .style(\"fill\", function (d) {\n        // console.log(\"f\", d.data.fill);\n        return d.data.fill;\n        // return \"blue\";\n      })\n      .attr(\"transform\", function (d) {\n        return `translate(${margin.left + sceneNum * (width * WIDTH_SCL + PADDING)}, ${PADDING + actNum * (height * HEIGHT_SCL + PADDING)})`;\n      })\n      .on(\"click\", (ev) => {\n        // console.log(\"click\", ev.target.dataset.title)\n        EventBus.$emit(EVENTS.CLICK_SCENE, ev.target.dataset.title);\n      })\n  });\n\n  // Y axis\n  var y = d3.scaleBand()\n    .range([0, height])\n    .domain([0, 1, 2, 3, 4].map(n => `Act ${n + 1}`))\n    .padding(.1);\n  svg.append(\"g\")\n    .attr(\"transform\", `translate(${margin.left - 10},0)`)\n    .call(d3.axisLeft(y))\n    .selectAll(\"text\")\n    .attr(\"fill\", \"black\")\n};\n\n\n\n\n// data looks like [{lineLength:1,value:10},...]\nexport const runLinegroups = (data = [], width = 500, height = 300) => {\n  const margin = { left: 80, top: 0, bottom: 30, right: 0 };\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  d3.selectAll(\".linegroups\").remove();\n\n  console.log(\"data..linegroup\", data);\n\n  var svg = d3.select(\".linegroups-container\")\n    .append(\"svg\")\n    .attr(\"width\", w)\n    .attr(\"height\", h)\n    .attr(\"class\", \"linegroups\")\n    .append(\"g\")\n    .attr(\"transform\",\n      \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  const max = Math.max(...data.map(d => d.value));\n  console.log(\"max linegroup\", max);\n\n  // Add X axis\n  var x = d3.scaleLinear()\n    .domain([0, max])\n    .range([0, width]);\n  svg.append(\"g\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x))\n    .selectAll(\"text\")\n    .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n    .style(\"text-anchor\", \"end\");\n\n  // Y axis\n  var y = d3.scaleBand()\n    .range([0, height])\n    .domain(data.map(d => d.lineLength))\n    .padding(.1);\n  svg.append(\"g\")\n    .call(d3.axisLeft(y))\n\n  //Bars\n  svg.selectAll(\"myRect\")\n    .data(data)\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\", x(0))\n    .attr(\"y\", function (d) { return y(d.lineLength); })\n    .attr(\"width\", function (d) { return x(d.value); })\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", function (d) {\n      // const idx = speakerAmts.findIndex(s => s.speaker === d.speaker);\n      // return getCharColor(idx);\n      return \"steelblue\"\n    });\n};\n\n\n\n\n\n\nexport const runCharacters = (data = {}, width = 500, height = 300) => {\n  const margin = { left: 80, top: 0, bottom: 30, right: 0 };\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  d3.selectAll(\".characters\").remove();\n\n  // const data = speakerAmts;\n  const { numLines, speakerAmts } = data;\n  // console.log(data);\n\n  var svg = d3.select(\".characters-container\")\n    .append(\"svg\")\n    .attr(\"width\", w)\n    .attr(\"height\", h)\n    .attr(\"class\", \"characters\")\n    .append(\"g\")\n    .attr(\"transform\",\n      \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  const max = Math.max(...speakerAmts.map(s => s.value)) * numLines;\n  // console.log(\"max\", max);\n\n  // Add X axis\n  var x = d3.scaleLinear()\n    .domain([0, max])\n    .range([0, width]);\n  svg.append(\"g\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x))\n    .selectAll(\"text\")\n    .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n    .style(\"text-anchor\", \"end\");\n\n  // Y axis\n  var y = d3.scaleBand()\n    .range([0, height])\n    .domain(speakerAmts.map(function (d) { return d.speaker; }))\n    .padding(.1);\n  svg.append(\"g\")\n    .call(d3.axisLeft(y))\n\n  //Bars\n  svg.selectAll(\"myRect\")\n    .data(speakerAmts)\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\", x(0))\n    .attr(\"y\", function (d) { return y(d.speaker); })\n    .attr(\"width\", function (d) { return x(d.value * numLines); })\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", function (d) {\n      const idx = speakerAmts.findIndex(s => s.speaker === d.speaker);\n      return getCharColor(idx);\n    });\n};\n\n\n\n\nexport const runInteractions = (data, speakerAmts = [], width = 500, height = 300) => {\n  const margin = { left: 150, top: 0, bottom: 30, right: 30 };\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  d3.selectAll(\".interactions\").remove();\n\n  var svg = d3.select(\".interactions-container\")\n    .append(\"svg\")\n    .attr(\"width\", w)\n    .attr(\"height\", h)\n    .attr(\"class\", \"interactions\")\n    .append(\"g\")\n    .attr(\"transform\",\n      \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n  const max = Math.max(...data.map(s => s.value));\n\n  // Add X axis\n  var x = d3.scaleLinear()\n    .domain([0, max])\n    .range([0, width]);\n  svg.append(\"g\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x))\n    .selectAll(\"text\")\n    .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n    .style(\"text-anchor\", \"end\");\n\n  // Y axis\n  var y = d3.scaleBand()\n    .range([0, height])\n    .domain(data.map(function (d) { return d.pair; }))\n    .padding(.1);\n  svg.append(\"g\")\n    .call(d3.axisLeft(y))\n\n  //Bars\n  svg.selectAll(\"myRect\")\n    .data(data)\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\", x(0))\n    .attr(\"y\", function (d) { return y(d.pair); })\n    .attr(\"width\", function (d) { return x(d.value) / 2; })\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", function (d) {\n      // console.log('get fill', d);\n      const names = d.pair.split(\"_\");\n      const idxs = names.map(name => speakerAmts.findIndex(s => s.speaker === name));\n      const fills = idxs.map(i => getCharColor(i));\n      // const fill = getCharColor()\n      return fills[0];\n      // return \"green\";\n      // return `linear-gradient(to right, blue, red)`;\n    })\n\n  svg.selectAll(\"myRect\")\n    .data(data)\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\", function (d) { return x(d.value) / 2; })\n    .attr(\"y\", function (d) { return y(d.pair); })\n    .attr(\"width\", function (d) { return x(d.value) / 2; })\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", function (d) {\n      const names = d.pair.split(\"_\");\n      const idxs = names.map(name => speakerAmts.findIndex(s => s.speaker === name));\n      const fills = idxs.map(i => getCharColor(i));\n      return fills[1];\n    })\n};\n\n\n\n\n\nexport const runRidgelines = (playData, chunkSize = 10, width = 500, height = 300, overlap = 0.6, speakerAmts = [], targetSpeaker = \"\", margin = { left: 100, top: 30, bottom: 30, right: 200 }) => {\n  // let defaultMargin = { left: 100, top: 30, bottom: 30, right: 200 };\n\n  const w = width + margin.left + margin.right;\n  const h = height + margin.top + margin.bottom;\n\n  // TODO: This affects the top one weirdly...add margin top? Yeah...need more for fewer speakers\n  // Basicaclly areaChartHeightshould control marginTOp\n  // var overlap = 0.6;\n\n  var x = function (d) {\n    return d.chunkIdx;\n  },\n    xScale = d3.scaleLinear().range([0, width]),\n    xValue = function (d) {\n      return xScale(x(d));\n    },\n    xAxis = d3.axisBottom(xScale);\n\n  var y = function (d) {\n    return d.value;\n  },\n    yScale = d3.scaleLinear(),\n    yValue = function (d) {\n      return yScale(y(d));\n    };\n\n  var speaker = function (d) {\n    return d[0];\n  },\n    speakerScale = d3.scaleBand().range([0, height]),\n    speakerValue = function (d) {\n      return speakerScale(speaker(d));\n    },\n    speakerAxis = d3.axisLeft(speakerScale);\n\n  // Try  different  curve types!\n  var area = d3.area().x(xValue).y1(yValue).curve(d3.curveCardinal);\n\n  var line = area.lineY1();\n\n\n  // ==================\n\n  d3.selectAll(\".ridges\").remove();\n\n  var svg = d3\n    .select(\".ridges-container\")\n    .append(\"svg\")\n    .attr(\"class\", \"ridges\")\n    .attr(\"width\", w)\n    .attr(\"height\", h)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  const dataFlat = playData;\n  const spkrs3 = getLinesBySpeakerByChunk(dataFlat, chunkSize, targetSpeaker);\n  // console.log(\"got it\", spkrs3);\n\n  var data = d3\n    .group(spkrs3, d => d.speaker)\n\n  xScale.domain(d3.extent(spkrs3, x));\n\n  speakerScale.domain(\n    // [0, data.size - 1]\n    data.keys()\n  );\n\n  var areaChartHeight = (1 + overlap) * (h / speakerScale.domain().length);\n  console.log(\"hgt\", areaChartHeight);\n  yScale.domain(d3.extent(spkrs3, y)).range([areaChartHeight, 0]);\n\n  area.y0(yScale(0));\n\n  svg\n    .append(\"g\")\n    .attr(\"class\", \"axis axis--x\")\n    .attr(\"transform\", \"translate(0,\" + h + \")\")\n    .call(xAxis);\n\n  svg.append(\"g\").attr(\"class\", \"axis axis--activity\").call(speakerAxis);\n\n  svg\n    .selectAll(\".axis--activity .tick\")\n    .on(\"mouseover\", function (d, i) {\n      d3.selectAll(\".area\").attr(\"class\", \"area\");\n      d3.selectAll(\".axis--activity .tick\").attr(\"font-weight\", \"normal\");\n      d3.select(this).attr(\"font-weight\", \"bold\");\n      // console.log(\"hover...\", d);\n      const area = d3.select(`#area-${slug(d.target.innerHTML)}`);\n      area.attr(\"class\", \"area active\");\n    })\n    .on(\"mouseout\", function (d) {\n      d3.selectAll(\".area\").attr(\"class\", \"area\");\n      d3.selectAll(\".axis--activity .tick\").attr(\"font-weight\", \"normal\");\n    })\n    .on(\"click\", function (d) {\n      // runSpeaker(d);\n      // console.log(\"speaker click\", d.target.innerHTML);\n      EventBus.$emit(EVENTS.CLICK_SPEAKER, d.target.innerHTML);\n    });\n\n  var gSpeaker = svg\n    .append(\"g\")\n    .attr(\"class\", \"activities\")\n    .selectAll(\".activity\")\n    .data(data)\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", function (d) {\n      return \"activity activity--\" + d[0];\n    })\n    .attr(\"transform\", function (d) {\n      var ty = speakerValue(d) - speakerScale.bandwidth() + 5;\n      return \"translate(0,\" + ty + \")\";\n    });\n\n  gSpeaker\n    .append(\"path\")\n    .attr(\"class\", \"area\")\n    .attr(\"id\", function (d, i) {\n      return `area-${slug(d[0])}`;\n    })\n    .attr(\"fill\", function (d) {\n      const idx = speakerAmts.findIndex(s => s.speaker === d[0]);\n      return getCharColor(idx);\n    })\n    .datum(function (d) {\n      const x = d[1];\n      return x;\n    })\n    .attr(\"d\", area);\n\n  gSpeaker\n    .append(\"path\")\n    .attr(\"class\", \"line\")\n    .datum(function (d) {\n      // return d.values;\n      return d[1];\n    })\n    .attr(\"d\", line);\n};\n\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { EVENTS, EventBus } from \"@/EventBus\";\nimport {\n  plays,\n  getPlayBreakdown,\n  runRidgelines,\n  getCharColor,\n  getSpeeches,\n  getCharacterInteractions,\n  getInteractionTotals,\n  runInteractions,\n  runCharacters,\n  getTotalMarks,\n  runPiecharts,\n  runLinegroups,\n  groupLinesByNumber,\n  euripidesPlays,\n} from \"@/utils\";\n\nimport axios from \"axios\";\nimport * as d3 from \"d3\";\n\n@Component\nexport default class Play extends Vue {\n  @Prop() private play!: string;\n\n  minLengthSelectOptions = [5, 10, 15, 20, 25, 30];\n  minLengthSelectOption = 20;\n\n  playData: any = [];\n\n  allSpeakers: any = [];\n\n  mounted() {\n    this.loadData();\n\n    EventBus.$on(EVENTS.CLICK_SCENE, (scene: string) => {\n      this.goScene(scene);\n    });\n\n    EventBus.$on(EVENTS.CLICK_SPEAKER, (speaker: string) => {\n      this.goCharacter(speaker);\n    });\n  }\n\n  @Watch(\"$route\")\n  routeChanged() {\n    this.loadData();\n  }\n\n  loadData() {\n    const isGreek = euripidesPlays.includes(this.play);\n    const baseUrl = isGreek ? \"./plays/euripides\" : \"./plays\";\n    axios\n      .get(`${baseUrl}/${this.play}.json`)\n      .then((r) => {\n        console.log(\"got...\", this.play, r.data);\n        this.playData = r.data;\n        const bd = getPlayBreakdown(this.playData);\n\n        // console.log(\"d...\", r.data);\n\n        this.allSpeakers = bd.speakerAmts;\n\n        // TODO: Don't like this magic number (related to marginLeft of ridgelines)\n        runRidgelines(this.playData, 10, window.innerWidth - 300, 500, 0.6, bd.speakerAmts);\n\n        const charInteractions = getCharacterInteractions(r.data);\n        const totals = getInteractionTotals(charInteractions);\n\n        const chartWidth = (window.innerWidth - 400) / 2;\n        const chartHeight = 300;\n\n        runInteractions(totals.slice(0, 10), bd.speakerAmts, chartWidth, chartHeight);\n\n        runCharacters(bd, chartWidth - 25, chartHeight);\n\n        runPiecharts(this.playData, bd.speakerAmts, window.innerWidth - 200, 400);\n\n        // runLinegroups(groupLinesByNumber(this.playData), window.innerWidth - 250, 400);\n\n        // const qmarks = getTotalMarks(this.playData, \"?\");\n        // console.log(\"qmarks\", qmarks, (100 * qmarks.total) / qmarks.allChars);\n      })\n      .catch((e) => console.error(\"e\", e));\n  }\n\n  get plays() {\n    return plays;\n  }\n\n  get speeches() {\n    const speeches = this.getSpeechesOfMinLength(this.minLengthSelectOption);\n    // console.log(\"speeches:\", speeches);\n    return speeches;\n  }\n\n  get playLabel() {\n    return plays.find((p) => p.value === this.play)?.label;\n  }\n\n  get characters() {\n    const bd = getPlayBreakdown(this.playData);\n    // console.log(\"bd\", bd, r.data);\n    return bd.speakerAmts.map((s) => s.speaker);\n  }\n\n  get scenes() {\n    return this.playData.map((scene: any) => scene.title);\n  }\n\n  getSpeechesOfMinLength(n: number) {\n    return this.playData\n      .reduce((acc: any[], scene: any) => {\n        const speeches = getSpeeches(scene).map((s) => {\n          return { data: s, title: scene.title };\n        });\n        return [\n          //@ts-ignore\n          ...acc,\n          ...speeches,\n        ];\n      }, [])\n      .filter((speech: any) => speech.data.lines.length >= n);\n  }\n\n  getCharStyle(charIdx: number) {\n    const col = getCharColor(charIdx);\n    return {\n      color: col,\n    };\n  }\n\n  getLineStyle(speaker: string) {\n    const charIdx = this.allSpeakers.findIndex((s: any) => s.speaker === speaker);\n    const col = getCharColor(charIdx);\n\n    return {\n      textShadow: `1px 1px 5px ${col}`,\n    };\n  }\n\n  goCharacter(name: string) {\n    this.$router.push(`/${this.play}/characters/${name}`);\n  }\n\n  goScene(scene: string) {\n    this.$router.push(`/${this.play}/${scene}`);\n  }\n\n  goPlay(play: string) {\n    this.$router.push(`/${play}`);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Play.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Play.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Play.vue?vue&type=template&id=bdb2ee3c&scoped=true&\"\nimport script from \"./Play.vue?vue&type=script&lang=ts&\"\nexport * from \"./Play.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Play.vue?vue&type=style&index=0&id=bdb2ee3c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bdb2ee3c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Explore the Bard\")]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('div',{staticStyle:{\"width\":\"200px\"}},_vm._l((_vm.plays),function(play){return _c('div',{key:play.value,staticClass:\"play\",on:{\"click\":function($event){return _vm.goPlay(play.value)}}},[_vm._v(\" \"+_vm._s(play.label)+\" \")])}),0),_c('div',{staticStyle:{\"flex-grow\":\"1\",\"height\":\"500px\",\"padding-left\":\"4rem\",\"overflow\":\"scroll\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchText),expression:\"searchText\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Search\"},domProps:{\"value\":(_vm.searchText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchText=$event.target.value}}}),_c('button',{staticStyle:{\"margin-left\":\"2pt\"},on:{\"click\":_vm.search}},[_vm._v(\"Go\")]),_c('div',{staticStyle:{\"margin\":\"1rem 0\",\"font-style\":\"italic\"}},[_vm._v(\"Total results: \"+_vm._s(_vm.searchResults.length))]),_c('div',_vm._l((_vm.searchResults),function(r,i){return _c('div',{key:i,staticStyle:{\"margin-bottom\":\"1.5rem\"}},[_c('div',[_vm._v(_vm._s(r.play)+\", \"+_vm._s(r.scene))]),_c('div',[_vm._v(\" \"+_vm._s(r.speaker)+\": \"),_c('span',[_vm._v(_vm._s(r.text))])])])}),0)])]),_c('hr',{staticStyle:{\"margin\":\"60px 0 20px 0\"}}),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"created\"},[_c('div',[_vm._v(\"Created by\")]),_c('div',[_c('a',{attrs:{\"href\":\"https://www.zackstout.com\"}},[_vm._v(\"zackstout\")])])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport axios from \"axios\";\nimport { plays } from \"@/utils\";\n\n// Be nice to emphasize the target word in each searchResult (italic?)\n\n@Component\nexport default class Play extends Vue {\n  plays = plays;\n\n  searchText = \"\";\n\n  allPlayText: any[] = [];\n\n  // should have play, scene, speaker, and text\n  searchResults: any[] = [];\n\n  mounted() {\n    this.getAll();\n  }\n\n  goPlay(play: string) {\n    this.$router.push(`/${play}`);\n  }\n\n  async getAll() {\n    const allPlays = await Promise.all(this.plays.map((p) => axios.get(`./plays/${p.value}.json`)));\n    this.allPlayText = allPlays.map((p) => p.data);\n    // console.log(\"all....\", this.allPlayText);\n  }\n\n  search() {\n    console.log(\"search\", this.searchText);\n\n    const tgt = this.searchText;\n\n    if (!tgt) return;\n\n    const results: any[] = [];\n\n    this.allPlayText.forEach((scenes) => {\n      scenes.forEach((scene: any) => {\n        scene.lines.forEach((line: any) => {\n          if (line.type === \"text\") {\n            if (line.value.includes(tgt)) {\n              results.push({\n                play: scene.play,\n                scene: scene.title,\n                speaker: line.speaker,\n                text: line.value,\n              });\n            }\n          }\n        });\n      });\n    });\n\n    this.searchResults = results;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=59c26bdf&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=ts&\"\nexport * from \"./Home.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=59c26bdf&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59c26bdf\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"sidebar\"}},[_c('div',{staticStyle:{\"padding\":\"1rem\"}},[_c('div',{staticStyle:{\"font-weight\":\"bold\"}},[_vm._v(\"CHARACTERS\")]),_vm._l((_vm.characters),function(c){return _c('div',{key:c,staticClass:\"side-char\",style:({ 'font-weight': c === _vm.character ? 'bold' : 'normal' }),on:{\"click\":function($event){return _vm.goCharacter(c)}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),_c('div',{staticStyle:{\"font-weight\":\"bold\",\"margin-top\":\"20px\"}},[_vm._v(\"SCENES\")]),_vm._l((_vm.scenes),function(s){return _c('div',{key:s,staticClass:\"side-scene\",on:{\"click\":function($event){return _vm.goScene(s)}}},[_vm._v(\" \"+_vm._s(s)+\" \")])}),_c('hr'),_vm._m(0)],2)]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{staticClass:\"click\",staticStyle:{\"width\":\"15px\",\"height\":\"15px\"},on:{\"click\":function($event){return _vm.$router.push('/')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/home_icon.png\"),\"alt\":\"\"}})]),_c('hr',{staticStyle:{\"margin-bottom\":\"0\"}}),_c('h2',[_vm._v(_vm._s(_vm.character))]),_c('h3',{staticClass:\"click\",staticStyle:{\"font-style\":\"italic\",\"margin-bottom\":\"30px\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.goPlay(_vm.play)}}},[_vm._v(\" \"+_vm._s(_vm.playLabel)+\" \")]),_c('div',{staticClass:\"ridges-container\",staticStyle:{\"margin-bottom\":\"20px\"}}),_c('div',{staticClass:\"interactions-container\"}),_c('div',_vm._l((_vm.speechesOfCharacter),function(speech,i){return _c('div',{key:i,staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{staticStyle:{\"font-weight\":\"bold\"}},[_vm._v(_vm._s(speech.title))]),_c('div',[_vm._v(\" \"+_vm._s(speech.data.speaker)+\" \"),_c('span',{staticStyle:{\"font-style\":\"italic\"}},[_vm._v(\"(\"+_vm._s(speech.data.lines.length)+\" lines)\")])]),_c('div',_vm._l((speech.data.lines),function(line,i){return _c('div',{key:i,style:(_vm.getLineStyle(speech.data.speaker))},[_vm._v(\" \"+_vm._s(line)+\" \")])}),0)])}),0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"created\"},[_c('div',[_vm._v(\"Created by\")]),_c('div',[_c('a',{attrs:{\"href\":\"https://www.zackstout.com\"}},[_vm._v(\"zackstout\")])])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport axios from \"axios\";\nimport {\n  getPlayBreakdown,\n  runRidgelines,\n  getCharacterInteractions,\n  getInteractionTotals,\n  runInteractions,\n  getSpeeches,\n  getCharColor,\n  plays,\n} from \"@/utils\";\n\n@Component\nexport default class Character extends Vue {\n  @Prop() private character!: string;\n\n  playData: any[] = [];\n  allSpeakers: any[] = [];\n\n  mounted() {\n    console.log(\"mount\", this.character);\n    this.loadData();\n  }\n\n  @Watch(\"$route\")\n  routeChanged() {\n    this.loadData();\n  }\n\n  loadData() {\n    axios\n      .get(`../../plays/${this.play}.json`) // tricky path difference\n      .then((r) => {\n        this.playData = r.data;\n        const bd = getPlayBreakdown(this.playData);\n        this.allSpeakers = bd.speakerAmts;\n        const charInteractions = getCharacterInteractions(r.data);\n\n        const totals = getInteractionTotals(charInteractions);\n\n        runRidgelines(this.playData, 10, window.innerWidth - 400, 35, 0.6, bd.speakerAmts, this.character, {\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 0,\n        });\n\n        runInteractions(\n          totals.filter((t) => t.pair.includes(this.character)),\n          bd.speakerAmts\n        );\n      })\n      .catch((e) => console.error(\"e\", e));\n  }\n\n  get play() {\n    return this.$route.params.play;\n  }\n\n  get playLabel() {\n    return plays.find((p) => p.value === this.play)?.label;\n  }\n\n  get speechesOfCharacter() {\n    return this.playData\n      .reduce((acc: any[], scene: any) => {\n        const speeches = getSpeeches(scene).map((s) => {\n          return { data: s, title: scene.title };\n        });\n        return [\n          //@ts-ignore\n          ...acc,\n          ...speeches,\n        ];\n      }, [])\n      .filter((speech: any) => speech.data.speaker === this.character);\n  }\n\n  get characters() {\n    return this.allSpeakers.map((s) => s.speaker);\n  }\n\n  get scenes() {\n    return this.playData.map((s) => s.title);\n  }\n\n  // copying from Play.vue\n\n  getLineStyle(speaker: string) {\n    const charIdx = this.allSpeakers.findIndex((s: any) => s.speaker === speaker);\n    const col = getCharColor(charIdx);\n\n    return {\n      textShadow: `1px 1px 5px ${col}`,\n    };\n  }\n\n  // copying from Play.vue\n\n  goCharacter(name: string) {\n    this.$router.push(`/${this.play}/characters/${name}`);\n  }\n\n  goScene(scene: string) {\n    this.$router.push(`/${this.play}/${scene}`);\n  }\n\n  goPlay(play: string) {\n    this.$router.push(`/${play}`);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Character.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Character.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Character.vue?vue&type=template&id=1f72e47c&scoped=true&\"\nimport script from \"./Character.vue?vue&type=script&lang=ts&\"\nexport * from \"./Character.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Character.vue?vue&type=style&index=0&id=1f72e47c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f72e47c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"sidebar\"}},[_c('div',{staticStyle:{\"padding\":\"1rem\"}},[_c('div',{staticStyle:{\"font-weight\":\"bold\"}},[_vm._v(\"CHARACTERS\")]),_vm._l((_vm.allCharacters),function(c){return _c('div',{key:c,staticClass:\"side-char\",on:{\"click\":function($event){return _vm.goCharacter(c)}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),_c('div',{staticStyle:{\"font-weight\":\"bold\",\"margin-top\":\"20px\"}},[_vm._v(\"SCENES\")]),_vm._l((_vm.allScenes),function(s){return _c('div',{key:s,staticClass:\"side-scene\",style:({ 'font-weight': s === _vm.scene ? 'bold' : 'normal' }),on:{\"click\":function($event){return _vm.goScene(s)}}},[_vm._v(\" \"+_vm._s(s)+\" \")])}),_c('hr'),_vm._m(0)],2)]),_c('div',{attrs:{\"id\":\"main\"}},[_c('div',{staticClass:\"click\",staticStyle:{\"width\":\"15px\",\"height\":\"15px\"},on:{\"click\":function($event){return _vm.$router.push('/')}}},[_c('img',{attrs:{\"src\":require(\"@/assets/home_icon.png\"),\"alt\":\"\"}})]),_c('hr',{staticStyle:{\"margin-bottom\":\"0\"}}),_c('h2',[(_vm.sceneIdx !== 0)?_c('span',{staticClass:\"click\",on:{\"click\":function($event){return _vm.goScene(_vm.prevScene)}}},[_vm._v(\"\")]):_vm._e(),_c('span',{staticStyle:{\"margin\":\"0 1rem\"}},[_vm._v(\"Act \"+_vm._s(_vm.actNum)+\", Scene \"+_vm._s(_vm.sceneNum))]),(_vm.sceneIdx !== _vm.allScenes.length - 1)?_c('span',{staticClass:\"click\",on:{\"click\":function($event){return _vm.goScene(_vm.nextScene)}}},[_vm._v(\"\")]):_vm._e()]),_c('div',{staticClass:\"scenepie-container\"}),_c('h3',{staticClass:\"click\",staticStyle:{\"font-style\":\"italic\"},on:{\"click\":function($event){return _vm.goPlay(_vm.play)}}},[_vm._v(_vm._s(_vm.playLabel))]),_c('div',{staticClass:\"ridges-container\"}),_c('div',_vm._l((_vm.characters),function(char){return _c('div',{key:char,staticClass:\"click\",style:(_vm.getCharStyle(char)),on:{\"click\":function($event){return _vm.goCharacter(char)}}},[_vm._v(\" \"+_vm._s(char)+\" \")])}),0),_c('div',_vm._l((_vm.sceneData.lines),function(line,j){return _c('div',{key:j,style:(_vm.getLineStyle(line))},[_vm._v(\" \"+_vm._s(line.value)+\" \")])}),0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"created\"},[_c('div',[_vm._v(\"Created by\")]),_c('div',[_c('a',{attrs:{\"href\":\"https://www.zackstout.com\"}},[_vm._v(\"zackstout\")])])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { plays, getSceneBreakdown, runRidgelines, getPlayBreakdown, getCharColor, runScenePie } from \"@/utils\";\nimport axios from \"axios\";\n\n@Component\nexport default class Scene extends Vue {\n  @Prop() private scene!: string;\n\n  sceneData: any = [];\n\n  sceneNum = \"0\";\n  actNum = \"0\";\n\n  allScenes: string[] = [];\n  sceneIdx = -1;\n\n  allSpeakers: any[] = [];\n\n  @Watch(\"$route\")\n  routeChanged() {\n    this.loadData();\n  }\n\n  mounted() {\n    this.loadData();\n  }\n\n  getCharStyle(char: string) {\n    const charIdx = this.allSpeakers.findIndex((s) => s.speaker === char);\n    const col = getCharColor(charIdx);\n    return {\n      color: col,\n    };\n  }\n\n  loadData() {\n    axios\n      .get(`../plays/${this.play}.json`)\n      .then((r) => {\n        const [a, s] = this.scene.split(\".\");\n        this.actNum = a;\n        this.sceneNum = s;\n        this.sceneData = r.data.find((scene: any) => scene.title === this.scene);\n        this.allScenes = r.data.map((scene: any) => scene.title);\n        this.sceneIdx = r.data.findIndex((scene: any) => scene.title === this.scene);\n\n        const bd = getPlayBreakdown(r.data);\n        this.allSpeakers = bd.speakerAmts;\n\n        // NOTE: Prob doesn't need to be so large\n        runRidgelines([this.sceneData], 2, window.innerWidth - 375, 250, 0.6, bd.speakerAmts);\n\n        runScenePie(r.data, this.scene, 50, 50);\n      })\n      .catch((e) => console.error(\"e\", e));\n  }\n\n  getLineStyle(line: any) {\n    const charIdx = this.allSpeakers.findIndex((s) => s.speaker === line.speaker);\n    const col = getCharColor(charIdx);\n\n    if (line.type === \"speech\") {\n      return {\n        fontWeight: \"bold\",\n        marginTop: \"25px\",\n        color: col,\n      };\n    } else {\n      return {\n        textShadow: `1px 1px 5px ${col}`,\n      };\n    }\n  }\n\n  get nextScene() {\n    return this.allScenes[this.sceneIdx + 1];\n  }\n\n  get prevScene() {\n    return this.allScenes[this.sceneIdx - 1];\n  }\n\n  get characters() {\n    const bd = getSceneBreakdown(this.sceneData);\n    // console.log(\"bd\", bd, r.data);\n    return bd.speakerAmts.map((s) => s.speaker);\n  }\n\n  get allCharacters() {\n    return this.allSpeakers.map((s) => s.speaker);\n  }\n\n  get play() {\n    return this.$route.params.play;\n  }\n\n  get playLabel() {\n    return plays.find((p) => p.value === this.play)?.label;\n  }\n\n  goCharacter(name: string) {\n    this.$router.push(`/${this.play}/characters/${name}`);\n  }\n\n  goScene(scene: string) {\n    this.$router.push(`/${this.play}/${scene}`);\n  }\n\n  goPlay(play: string) {\n    this.$router.push(`/${play}`);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Scene.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Scene.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Scene.vue?vue&type=template&id=6188992f&scoped=true&\"\nimport script from \"./Scene.vue?vue&type=script&lang=ts&\"\nexport * from \"./Scene.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Scene.vue?vue&type=style&index=0&id=6188992f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6188992f\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport App from './App.vue';\nimport VueRouter from \"vue-router\";\nimport Play from \"@/components/Play.vue\";\nimport Home from \"@/components/Home.vue\";\nimport Character from \"@/components/Character.vue\";\nimport Scene from \"@/components/Scene.vue\";\n\nVue.use(VueRouter);\n\nconst router = new VueRouter({\n  mode: \"history\",\n  routes: [{\n    name: \"home\",\n    path: \"/\",\n    component: Home,\n  },\n  {\n    name: \"play\",\n    path: \"/:play\",\n    component: Play,\n    props: (route) => ({ play: route.params.play })\n  },\n  {\n    name: \"character\",\n    path: \"/:play/characters/:character\",\n    component: Character,\n    props: (route) => ({ character: route.params.character })\n  },\n  {\n    name: \"scene\",\n    path: \"/:play/:scene\",\n    component: Scene,\n    props: (route) => ({ scene: route.params.scene })\n  },\n  ]\n});\n\nVue.config.productionTip = false;\n\nnew Vue({\n  router,\n  render: (h) => h(App),\n}).$mount('#app');\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=59c26bdf&scoped=true&lang=css&\""],"sourceRoot":""}